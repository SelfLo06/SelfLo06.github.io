import{_ as N,r as c,w as z,a as S,c as o,d as p,F as C,e as x,f as m,v as E,h as r,i as V,j as l,t as u,k as v,u as A,R as D,x as L}from"./index-BXz57VEp.js";import{v as R}from"./el-loading-Cyfxj566.js";import{E as T}from"./el-select-BXveFzph.js";import"./el-input-CQLv-I8C.js";import{E as b}from"./el-empty-CEeMV3JD.js";import"./index-Dy8fI9sg.js";const B={key:0,class:"article-grid"},I={class:"card-cover"},q=["src","alt"],F={key:1,class:"cover-placeholder"},P={class:"card-body"},U={class:"card-title"},j={class:"card-summary"},G={class:"card-meta"},H={key:0},J={key:1},K={key:1,class:"empty-container"},M={key:2,class:"pagination-container"},O={__name:"SearchView",setup(Q){const g=E(),i=c([]),t=c({pageNum:1,pageSize:10,total:0}),d=c(!0),y=c(""),_=async()=>{const s=g.query.keyword;if(!s){i.value=[],t.value.total=0;return}y.value=s,d.value=!0;try{const a={keyword:s,pageNum:t.value.pageNum,pageSize:t.value.pageSize},n=await L(a);n.code===0&&n.data&&Array.isArray(n.data.records)?(i.value=n.data.records,t.value.total=n.data.total||0):(i.value=[],t.value.total=0)}catch(a){console.error("搜索文章时发生错误:",a),i.value=[],t.value.total=0}finally{d.value=!1}},f=s=>{t.value.pageNum=s,_(),window.scrollTo(0,0)},h=s=>s?s.split("T")[0]:"";return z(()=>g.query.keyword,(s,a)=>{s&&s!==a&&(t.value.pageNum=1,_())},{immediate:!0}),(s,a)=>{const n=b,k=T,w=R;return S((r(),o("div",null,[i.value.length>0?(r(),o("div",B,[(r(!0),o(C,null,x(i.value,e=>(r(),o("div",{key:e.id,class:"article-card"},[m(A(D),{to:{name:"articleDetail",params:{id:e.id}},class:"card-link"},{default:V(()=>[l("div",I,[e.coverImage?(r(),o("img",{key:0,src:e.coverImage,alt:e.title,loading:"lazy"},null,8,q)):(r(),o("div",F,[l("span",null,u(e.title.charAt(0)),1)]))]),l("div",P,[l("h2",U,u(e.title),1),l("p",j,u(e.summary||"暂无摘要..."),1),l("div",G,[l("span",null,[a[2]||(a[2]=l("i",{class:"fa-regular fa-calendar-days"},null,-1)),v(" "+u(h(e.createTime)),1)]),e.categoryName?(r(),o("span",H,[a[3]||(a[3]=l("i",{class:"fa-regular fa-folder"},null,-1)),v(" "+u(e.categoryName),1)])):p("",!0),e.wordCount?(r(),o("span",J,[a[4]||(a[4]=l("i",{class:"fa-regular fa-file-word"},null,-1)),v(" 约 "+u(e.wordCount)+" 字",1)])):p("",!0)])])]),_:2},1032,["to"])]))),128))])):(r(),o("div",K,[m(n,{description:"没有找到相关的文章，换个关键词试试吧~"})])),t.value.total>0?(r(),o("div",M,[m(k,{background:"",layout:"prev, pager, next",total:t.value.total,"current-page":t.value.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>t.value.pageNum=e),"page-size":t.value.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>t.value.pageSize=e),onCurrentChange:f},null,8,["total","current-page","page-size"])])):p("",!0)])),[[w,d.value]])}}},ae=N(O,[["__scopeId","data-v-e8c3bf92"]]);export{ae as default};

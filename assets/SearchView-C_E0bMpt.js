import{_ as S,u as b,r as u,w as z,a as C,c as r,b as v,F as x,d as V,n as T,e as f,f as A,g as y,I as D,i as o,j as I,k as l,t as i,l as p,R as L,J as R}from"./index-DDqkHWvC.js";import{v as B}from"./el-loading-CXHrt147.js";import{E}from"./el-select-BsY4edj4.js";import"./el-input-BI_Q1fbo.js";import"./index-2DhoJX_A.js";const q={key:0,class:"article-grid"},F={class:"card-cover"},P=["src","alt"],U={key:1,class:"cover-placeholder"},j={class:"card-body"},J={class:"card-title"},G={class:"card-summary"},H={class:"card-meta"},K={key:0},M={key:1},O={key:2,class:"pagination-container"},Q={__name:"SearchView",setup(W){const _=b(),m=D(),d=u([]),t=u({pageNum:1,pageSize:10,total:0}),c=u(!0),h=u(""),g=async()=>{const s=m.query.keyword;if(!s){d.value=[],t.value.total=0;return}h.value=s,c.value=!0;try{const a={keyword:s,pageNum:t.value.pageNum,pageSize:t.value.pageSize},n=await R(a);n.code===0&&n.data&&Array.isArray(n.data.records)?(d.value=n.data.records,t.value.total=n.data.total||0):(d.value=[],t.value.total=0)}catch(a){console.error("搜索文章时发生错误:",a),d.value=[],t.value.total=0}finally{c.value=!1}},k=s=>{t.value.pageNum=s,g(),window.scrollTo(0,0)},w=s=>s?s.split("T")[0]:"";return z(()=>m.query.keyword,(s,a)=>{s&&s!==a&&(t.value.pageNum=1,g())},{immediate:!0}),(s,a)=>{const n=E,N=B;return C((o(),r("div",null,[d.value.length>0?(o(),r("div",q,[(o(!0),r(x,null,V(d.value,e=>(o(),r("div",{key:e.id,class:"article-card"},[y(f(L),{to:{name:"articleDetail",params:{id:e.id}},class:"card-link"},{default:I(()=>[l("div",F,[e.coverImage?(o(),r("img",{key:0,src:e.coverImage,alt:e.title,loading:"lazy"},null,8,P)):(o(),r("div",U,[l("span",null,i(e.title.charAt(0)),1)]))]),l("div",j,[l("h2",J,i(e.title),1),l("p",G,i(e.summary||"暂无摘要..."),1),l("div",H,[l("span",null,[a[2]||(a[2]=l("i",{class:"fa-regular fa-calendar-days"},null,-1)),p(" "+i(w(e.createTime)),1)]),e.categoryName?(o(),r("span",K,[a[3]||(a[3]=l("i",{class:"fa-regular fa-folder"},null,-1)),p(" "+i(e.categoryName),1)])):v("",!0),e.wordCount?(o(),r("span",M,[a[4]||(a[4]=l("i",{class:"fa-regular fa-file-word"},null,-1)),p(" 约 "+i(e.wordCount)+" 字",1)])):v("",!0)])])]),_:2},1032,["to"])]))),128))])):(o(),r("div",{key:1,class:T(["empty-container",{"dark-theme":f(_).theme==="dark"}])},a[5]||(a[5]=[A('<div class="empty-state" data-v-70df0bfa><div class="magnifier" data-v-70df0bfa><div class="magnifier-glass" data-v-70df0bfa></div><div class="magnifier-handle" data-v-70df0bfa></div></div><div class="empty-text" data-v-70df0bfa><p data-v-70df0bfa>没有找到相关的文章，换个关键词试试吧~</p></div></div>',1)]),2)),t.value.total>0?(o(),r("div",O,[y(n,{background:"",layout:"prev, pager, next",total:t.value.total,"current-page":t.value.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>t.value.pageNum=e),"page-size":t.value.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>t.value.pageSize=e),onCurrentChange:k},null,8,["total","current-page","page-size"])])):v("",!0)])),[[N,c.value]])}}},ea=S(Q,[["__scopeId","data-v-70df0bfa"]]);export{ea as default};

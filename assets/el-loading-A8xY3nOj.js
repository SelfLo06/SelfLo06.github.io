import{bR as Z,a9 as z,a6 as F,r as A,m as i,E as Y,b9 as D,aN as M,bS as q,u as L,aw as H,bT as J,bU as U,Y as W,bV as Q,D as X,ab as ee,aE as p,i as te,a as ne,f as se,aa as oe,a1 as ae,bG as I,al as le,p as B,am as T,bF as x,bE as h,I as O,bx as re,bW as ue}from"./index-BP9_23Ue.js";import{g as ie,u as ce,l as de}from"./index-DxAFaQZA.js";import{M as ve,N as fe}from"./el-input-Bzsi2Ffj.js";const $=Symbol();function ge(e,t,n){return e==null?e:Z(e,t,n)}const N=e=>Object.keys(e),Ae=(e,t,n)=>({get value(){return ie(e,t,n)},set value(o){ge(e,t,o)}}),k=A();function P(e,t=void 0){const n=z()?F($,k):k;return e?i(()=>{var o,s;return(s=(o=n.value)==null?void 0:o[e])!=null?s:t}):n}function me(e,t){const n=P(),o=Y(e,i(()=>{var a;return((a=n.value)==null?void 0:a.namespace)||D})),s=ce(i(()=>{var a;return(a=n.value)==null?void 0:a.locale})),l=M(i(()=>{var a;return((a=n.value)==null?void 0:a.zIndex)||q})),u=i(()=>{var a;return L(t)||((a=n.value)==null?void 0:a.size)||""});return be(i(()=>L(n)||{})),{ns:o,locale:s,zIndex:l,size:u}}const be=(e,t,n=!1)=>{var o;const s=!!z(),l=s?P():void 0,u=(o=void 0)!=null?o:s?H:void 0;if(!u)return;const a=i(()=>{const m=L(e);return l?.value?pe(l.value,m):m});return u($,a),u(de,i(()=>a.value.locale)),u(J,i(()=>a.value.namespace)),u(U,i(()=>a.value.zIndex)),u(ve,{size:i(()=>a.value.size||"")}),u(fe,i(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(n||!k.value)&&(k.value=a.value),a},pe=(e,t)=>{const n=[...new Set([...N(e),...N(t)])],o={};for(const s of n)o[s]=t[s]!==void 0?t[s]:e[s];return o};function xe(e,t){let n;const o=A(!1),s=W({...e,originalPosition:"",originalOverflow:"",visible:!1});function l(r){s.text=r}function u(){const r=s.parent,v=f.ns;if(!r.vLoadingAddClassList){let d=r.getAttribute("loading-number");d=Number.parseInt(d)-1,d?r.setAttribute("loading-number",d.toString()):(I(r,v.bm("parent","relative")),r.removeAttribute("loading-number")),I(r,v.bm("parent","hidden"))}a(),b.unmount()}function a(){var r,v;(v=(r=f.$el)==null?void 0:r.parentNode)==null||v.removeChild(f.$el)}function m(){var r;e.beforeClose&&!e.beforeClose()||(o.value=!0,clearTimeout(n),n=setTimeout(c,400),s.visible=!1,(r=e.closed)==null||r.call(e))}function c(){if(!o.value)return;const r=s.parent;o.value=!1,r.vLoadingAddClassList=void 0,u()}const y=X({name:"ElLoading",setup(r,{expose:v}){const{ns:d,zIndex:R}=me("loading");return v({ns:d,zIndex:R}),()=>{const S=s.spinner||s.svg,j=p("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...S?{innerHTML:S}:{}},[p("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),G=s.text?p("p",{class:d.b("text")},[s.text]):void 0;return p(ae,{name:d.b("fade"),onAfterLeave:c},{default:te(()=>[ne(se("div",{style:{backgroundColor:s.background||""},class:[d.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[p("div",{class:d.b("spinner")},[j,G])]),[[oe,s.visible]])])})}}}),b=Q(y);Object.assign(b._context,t??{});const f=b.mount(document.createElement("div"));return{...ee(s),setText:l,removeElLoadingChild:a,close:m,handleAfterLeave:c,vm:f,get $el(){return f.$el}}}let _;const w=function(e={}){if(!le)return;const t=Ce(e);if(t.fullscreen&&_)return _;const n=xe({...t,closed:()=>{var s;(s=t.closed)==null||s.call(t),t.fullscreen&&(_=void 0)}},w._context);ye(t,t.parent,n),E(t,t.parent,n),t.parent.vLoadingAddClassList=()=>E(t,t.parent,n);let o=t.parent.getAttribute("loading-number");return o?o=`${Number.parseInt(o)+1}`:o="1",t.parent.setAttribute("loading-number",o),t.parent.appendChild(n.$el),B(()=>n.visible.value=t.visible),t.fullscreen&&(_=n),n},Ce=e=>{var t,n,o,s;let l;return T(e.target)?l=(t=document.querySelector(e.target))!=null?t:document.body:l=e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(o=e.lock)!=null?o:!1,customClass:e.customClass||"",visible:(s=e.visible)!=null?s:!0,beforeClose:e.beforeClose,closed:e.closed,target:l}},ye=async(e,t,n)=>{const{nextZIndex:o}=n.vm.zIndex||n.vm._.exposed.zIndex,s={};if(e.fullscreen)n.originalPosition.value=x(document.body,"position"),n.originalOverflow.value=x(document.body,"overflow"),s.zIndex=o();else if(e.parent===document.body){n.originalPosition.value=x(document.body,"position"),await B();for(const l of["top","left"]){const u=l==="top"?"scrollTop":"scrollLeft";s[l]=`${e.target.getBoundingClientRect()[l]+document.body[u]+document.documentElement[u]-Number.parseInt(x(document.body,`margin-${l}`),10)}px`}for(const l of["height","width"])s[l]=`${e.target.getBoundingClientRect()[l]}px`}else n.originalPosition.value=x(t,"position");for(const[l,u]of Object.entries(s))n.$el.style[l]=u},E=(e,t,n)=>{const o=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?I(t,o.bm("parent","relative")):h(t,o.bm("parent","relative")),e.fullscreen&&e.lock?h(t,o.bm("parent","hidden")):I(t,o.bm("parent","hidden"))};w._context=null;const C=Symbol("ElLoading"),g=e=>`element-loading-${ue(e)}`,V=(e,t)=>{var n,o,s,l;const u=t.instance,a=r=>O(t.value)?t.value[r]:void 0,m=r=>{const v=T(r)&&u?.[r]||r;return A(v)},c=r=>m(a(r)||e.getAttribute(g(r))),y=(n=a("fullscreen"))!=null?n:t.modifiers.fullscreen,b={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:y,target:(o=a("target"))!=null?o:y?void 0:e,body:(s=a("body"))!=null?s:t.modifiers.body,lock:(l=a("lock"))!=null?l:t.modifiers.lock},f=w(b);f._context=K._context,e[C]={options:b,instance:f}},_e=(e,t)=>{for(const n of Object.keys(e))re(e[n])&&(e[n].value=t[n])},K={mounted(e,t){t.value&&V(e,t)},updated(e,t){const n=e[C];if(!t.value){n?.instance.close(),e[C]=null;return}n?_e(n.options,O(t.value)?t.value:{text:e.getAttribute(g("text")),svg:e.getAttribute(g("svg")),svgViewBox:e.getAttribute(g("svgViewBox")),spinner:e.getAttribute(g("spinner")),background:e.getAttribute(g("background")),customClass:e.getAttribute(g("customClass"))}):V(e,t)},unmounted(e){var t;(t=e[C])==null||t.instance.close(),e[C]=null}};K._context=null;export{me as a,Ae as g,N as k,P as u,K as v};

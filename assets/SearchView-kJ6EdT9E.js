import{_ as b,u as z,r as c,w as C,a as x,c as r,b as v,F as N,d as V,n as T,e as f,f as A,g as y,I as D,j as o,k as I,l,t as i,m as p,R as L,J as R}from"./index-Dg9NVWcl.js";import{v as B}from"./el-loading-DDdQ_Lmd.js";import{E}from"./el-select-D4CNbIjY.js";import"./el-input-BHzU8Kh_.js";import"./index-B2fCrfUs.js";const q={key:0,class:"article-grid"},F={class:"card-cover"},P=["src","alt"],U={key:1,class:"cover-placeholder"},j={class:"card-body"},J={class:"card-title"},G={class:"card-summary"},H={class:"card-meta"},K={key:0},M={key:1},O={key:2,class:"pagination-container"},Q={__name:"SearchView",setup(W){const _=z(),g=D(),n=c([]),t=c({page:1,pageSize:10,total:0}),u=c(!0),h=c(""),m=async()=>{const s=g.query.keyword;if(!s){n.value=[],t.value.total=0;return}h.value=s,u.value=!0;try{const e={keyword:s,page:t.value.page,pageSize:t.value.pageSize},d=await R(e);d.code===0&&d.data&&Array.isArray(d.data.records)?(n.value=d.data.records,t.value.total=d.data.total||0):(n.value=[],t.value.total=0)}catch(e){console.error("搜索文章时发生错误:",e),n.value=[],t.value.total=0}finally{u.value=!1}},k=s=>{t.value.page=s,m(),window.scrollTo(0,0)},w=s=>s?s.split("T")[0]:"";return C(()=>g.query.keyword,(s,e)=>{s&&s!==e&&(t.value.page=1,m())},{immediate:!0}),(s,e)=>{const d=E,S=B;return x((o(),r("div",null,[n.value.length>0?(o(),r("div",q,[(o(!0),r(N,null,V(n.value,a=>(o(),r("div",{key:a.id,class:"article-card"},[y(f(L),{to:{name:"articleDetail",params:{id:a.id}},class:"card-link"},{default:I(()=>[l("div",F,[a.coverImage?(o(),r("img",{key:0,src:a.coverImage,alt:a.title,loading:"lazy"},null,8,P)):(o(),r("div",U,[l("span",null,i(a.title.charAt(0)),1)]))]),l("div",j,[l("h2",J,i(a.title),1),l("p",G,i(a.summary||"暂无摘要..."),1),l("div",H,[l("span",null,[e[2]||(e[2]=l("i",{class:"fa-regular fa-calendar-days"},null,-1)),p(" "+i(w(a.createTime)),1)]),a.categoryName?(o(),r("span",K,[e[3]||(e[3]=l("i",{class:"fa-regular fa-folder"},null,-1)),p(" "+i(a.categoryName),1)])):v("",!0),a.wordCount?(o(),r("span",M,[e[4]||(e[4]=l("i",{class:"fa-regular fa-file-word"},null,-1)),p(" 约 "+i(a.wordCount)+" 字",1)])):v("",!0)])])]),_:2},1032,["to"])]))),128))])):(o(),r("div",{key:1,class:T(["empty-container",{"dark-theme":f(_).theme==="dark"}])},e[5]||(e[5]=[A('<div class="empty-state" data-v-0dd6feb7><div class="magnifier" data-v-0dd6feb7><div class="magnifier-glass" data-v-0dd6feb7></div><div class="magnifier-handle" data-v-0dd6feb7></div></div><div class="empty-text" data-v-0dd6feb7><p data-v-0dd6feb7>没有找到相关的文章，换个关键词试试吧~</p></div></div>',1)]),2)),t.value.total>0?(o(),r("div",O,[y(d,{background:"",layout:"prev, pager, next",total:t.value.total,"current-page":t.value.page,"onUpdate:currentPage":e[0]||(e[0]=a=>t.value.page=a),"page-size":t.value.pageSize,"onUpdate:pageSize":e[1]||(e[1]=a=>t.value.pageSize=a),onCurrentChange:k},null,8,["total","current-page","page-size"])])):v("",!0)])),[[S,u.value]])}}},ae=b(Q,[["__scopeId","data-v-0dd6feb7"]]);export{ae as default};

import{_ as z,u as T,r as v,w as x,o as V,a as A,c as t,b as c,F as f,d as h,n as L,e as b,f as D,g as k,h as B,i as E,j as s,k as P,l as n,t as l,m as p}from"./index-DOFK84h7.js";import{v as q}from"./el-loading-Cz57bvO9.js";import{E as F}from"./el-select-p-2VEg5n.js";import"./el-input-Dmk4FsLm.js";import"./index-dQTQ8eIy.js";const H={key:0,class:"article-grid"},R={class:"card-cover"},j=["src","alt"],M={key:1,class:"cover-placeholder"},U={class:"card-body"},G={class:"card-title"},J={class:"card-summary"},K={class:"card-meta"},O={key:0},Q={key:1},W={key:0,class:"meta-tags-list"},X={key:2,class:"pagination-container"},Y={__name:"HomeView",props:{categoryId:{type:String,required:!1},tagId:{type:String,required:!1}},setup(I){const w=T(),d=I,i=v([]),o=v({pageNum:1,pageSize:10,total:0}),u=v(!0),g=async()=>{u.value=!0;try{const r={pageNum:o.value.pageNum,pageSize:o.value.pageSize};d.categoryId&&(r.categoryId=d.categoryId),d.tagId&&(r.tagId=d.tagId);const a=await B(r);a.code===0&&a.data&&Array.isArray(a.data.records)?(i.value=a.data.records,o.value.total=a.data.total||0):(i.value=[],o.value.total=0)}catch(r){console.error("请求文章列表时发生错误:",r),i.value=[],o.value.total=0}finally{u.value=!1}},N=r=>{o.value.pageNum=r,g(),window.scrollTo(0,0)},C=r=>r?r.split("T")[0]:"";return x([()=>d.categoryId,()=>d.tagId],([r,a],[m,y])=>{o.value.pageNum=1,g(),window.scrollTo(0,0)}),V(()=>{g()}),(r,a)=>{const m=E("RouterLink"),y=F,S=q;return A((s(),t("div",null,[i.value.length>0?(s(),t("div",H,[(s(!0),t(f,null,h(i.value,e=>(s(),t("div",{key:e.id,class:"article-card"},[k(m,{to:{name:"articleDetail",params:{id:e.id}},class:"card-link"},{default:P(()=>[n("div",R,[e.coverImage?(s(),t("img",{key:0,src:e.coverImage,alt:e.title,loading:"lazy"},null,8,j)):(s(),t("div",M,[n("span",null,l(e.title.charAt(0)),1)]))]),n("div",U,[n("h2",G,l(e.title),1),n("p",J,l(e.summary||"暂无摘要..."),1),n("div",K,[n("span",null,[a[1]||(a[1]=n("i",{class:"fa-regular fa-calendar-days"},null,-1)),p(" "+l(C(e.createTime)),1)]),e.categoryName?(s(),t("span",O,[a[2]||(a[2]=n("i",{class:"fa-regular fa-folder"},null,-1)),p(" "+l(e.categoryName),1)])):c("",!0),e.wordCount?(s(),t("span",Q,[a[3]||(a[3]=n("i",{class:"fa-regular fa-file-word"},null,-1)),p(" 约 "+l(e.wordCount)+" 字",1)])):c("",!0)]),e.tags&&e.tags.length?(s(),t("div",W,[(s(!0),t(f,null,h(e.tags,_=>(s(),t("span",{key:_.id,class:"card-tag"}," # "+l(_.name),1))),128))])):c("",!0)])]),_:2},1032,["to"])]))),128))])):u.value?c("",!0):(s(),t("div",{key:1,class:L(["empty-container",{"dark-theme":b(w).theme==="dark"}])},a[4]||(a[4]=[D('<div class="empty-state" data-v-02ee3659><div class="magnifier" data-v-02ee3659><div class="magnifier-glass" data-v-02ee3659></div><div class="magnifier-handle" data-v-02ee3659></div></div><div class="empty-text" data-v-02ee3659><p data-v-02ee3659>博主很懒，还没有发布任何文章~</p></div></div>',1)]),2)),o.value.total>0?(s(),t("div",X,[k(y,{background:"",layout:"prev, pager, next",total:o.value.total,"current-page":o.value.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>o.value.pageNum=e),"page-size":o.value.pageSize,onCurrentChange:N},null,8,["total","current-page","page-size"])])):c("",!0)])),[[S,u.value]])}}},se=z(Y,[["__scopeId","data-v-02ee3659"]]);export{se as default};

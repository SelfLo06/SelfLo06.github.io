import{_ as S,u as z,r as m,w as x,o as V,a as T,c as s,b as c,F as _,d as h,n as A,e as L,f as D,g as k,h as B,i as E,j as o,k as P,l as n,t as l,m as f}from"./index-ChEZKPos.js";import{v as q}from"./el-loading-B6YH2urj.js";import{E as F}from"./el-select-DMopqtsR.js";import"./el-input-B5h42mLk.js";import"./index-ZhDNKYLm.js";const H={key:0,class:"article-grid"},R={class:"card-cover"},j=["src","alt"],M={key:1,class:"cover-placeholder"},U={class:"card-body"},G={class:"card-title"},J={class:"card-summary"},K={class:"card-meta"},O={key:0},Q={key:1},W={key:0,class:"meta-tags-list"},X={key:2,class:"pagination-container"},Y={__name:"HomeView",props:{categoryId:{type:String,required:!1},tagId:{type:String,required:!1}},setup(b){const w=z(),d=b,i=m([]),r=m({pageNum:1,pageSize:10,total:0}),u=m(!0),g=async()=>{u.value=!0;try{const t={pageNum:r.value.pageNum,pageSize:r.value.pageSize};d.categoryId&&(t.categoryId=d.categoryId),d.tagId&&(t.tagId=d.tagId);const e=await B(t);e.code===0&&e.data&&Array.isArray(e.data.records)?(i.value=e.data.records,r.value.total=e.data.total||0):(i.value=[],r.value.total=0)}catch(t){console.error("请求文章列表时发生错误:",t),i.value=[],r.value.total=0}finally{u.value=!1}},N=t=>{r.value.pageNum=t,g(),window.scrollTo(0,0)},I=t=>t?t.split("T")[0]:"";return x(()=>[d.categoryId,d.tagId],([t,e],[v,p])=>{(t!==v||e!==p)&&(r.value.pageNum=1,g(),window.scrollTo(0,0))}),V(()=>{g()}),(t,e)=>{const v=E("RouterLink"),p=F,C=q;return T((o(),s("div",null,[i.value.length>0?(o(),s("div",H,[(o(!0),s(_,null,h(i.value,a=>(o(),s("div",{key:a.id,class:"article-card"},[k(v,{to:{name:"articleDetail",params:{id:a.id}},class:"card-link"},{default:P(()=>[n("div",R,[a.coverImage?(o(),s("img",{key:0,src:a.coverImage,alt:a.title,loading:"lazy"},null,8,j)):(o(),s("div",M,[n("span",null,l(a.title.charAt(0)),1)]))]),n("div",U,[n("h2",G,l(a.title),1),n("p",J,l(a.summary||"暂无摘要..."),1),n("div",K,[n("span",null,[e[1]||(e[1]=n("i",{class:"fa-regular fa-calendar-days"},null,-1)),f(" "+l(I(a.createTime)),1)]),a.categoryName?(o(),s("span",O,[e[2]||(e[2]=n("i",{class:"fa-regular fa-folder"},null,-1)),f(" "+l(a.categoryName),1)])):c("",!0),a.wordCount?(o(),s("span",Q,[e[3]||(e[3]=n("i",{class:"fa-regular fa-file-word"},null,-1)),f(" 约 "+l(a.wordCount)+" 字",1)])):c("",!0)]),a.tags&&a.tags.length?(o(),s("div",W,[(o(!0),s(_,null,h(a.tags,y=>(o(),s("span",{key:y.id,class:"card-tag"}," # "+l(y.name),1))),128))])):c("",!0)])]),_:2},1032,["to"])]))),128))])):u.value?c("",!0):(o(),s("div",{key:1,class:A(["empty-container",{"dark-theme":L(w).theme==="dark"}])},e[4]||(e[4]=[D('<div class="empty-state" data-v-c60feb7b><div class="magnifier" data-v-c60feb7b><div class="magnifier-glass" data-v-c60feb7b></div><div class="magnifier-handle" data-v-c60feb7b></div></div><div class="empty-text" data-v-c60feb7b><p data-v-c60feb7b>博主很懒，还没有发布任何文章~</p></div></div>',1)]),2)),r.value.total>0?(o(),s("div",X,[k(p,{background:"",layout:"prev, pager, next",total:r.value.total,"current-page":r.value.pageNum,"onUpdate:currentPage":e[0]||(e[0]=a=>r.value.pageNum=a),"page-size":r.value.pageSize,onCurrentChange:N},null,8,["total","current-page","page-size"])])):c("",!0)])),[[C,u.value]])}}},se=S(Y,[["__scopeId","data-v-c60feb7b"]]);export{se as default};

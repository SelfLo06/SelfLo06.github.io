import{_ as N,r as c,w as z,a as S,c as l,b as C,d as p,F as x,e as E,f as _,v as V,h as o,i as A,j as r,t as u,k as m,u as B,R as D,x as L}from"./index-BjMc-Z06.js";import{v as R}from"./el-loading-DZ8Mz8MY.js";import{E as T}from"./el-select-CfQGxTiL.js";import"./el-input-SrOC7dix.js";import{E as b}from"./el-empty-Do39_ILN.js";import"./index-0sHlbRQR.js";const I={key:0,class:"article-grid"},q={class:"card-cover"},F=["src","alt"],P={key:1,class:"cover-placeholder"},U={class:"card-body"},j={class:"card-title"},G={class:"card-summary"},H={class:"card-meta"},J={key:0},K={key:1},M={key:2,class:"pagination-container"},O={__name:"SearchView",setup(Q){const v=V(),i=c([]),t=c({pageNum:1,pageSize:10,total:0}),d=c(!0),y=c(""),g=async()=>{const s=v.query.keyword;if(!s){i.value=[],t.value.total=0;return}y.value=s,d.value=!0;try{const a={keyword:s,pageNum:t.value.pageNum,pageSize:t.value.pageSize},n=await L(a);n.code===0&&n.data&&Array.isArray(n.data.records)?(i.value=n.data.records,t.value.total=n.data.total||0):(i.value=[],t.value.total=0)}catch(a){console.error("搜索文章时发生错误:",a),i.value=[],t.value.total=0}finally{d.value=!1}},f=s=>{t.value.pageNum=s,g(),window.scrollTo(0,0)},h=s=>s?s.split("T")[0]:"";return z(()=>v.query.keyword,(s,a)=>{s&&s!==a&&(t.value.pageNum=1,g())},{immediate:!0}),(s,a)=>{const n=b,k=T,w=R;return S((o(),l("div",null,[i.value.length>0?(o(),l("div",I,[(o(!0),l(x,null,E(i.value,e=>(o(),l("div",{key:e.id,class:"article-card"},[_(B(D),{to:{name:"articleDetail",params:{id:e.id}},class:"card-link"},{default:A(()=>[r("div",q,[e.coverImage?(o(),l("img",{key:0,src:e.coverImage,alt:e.title,loading:"lazy"},null,8,F)):(o(),l("div",P,[r("span",null,u(e.title.charAt(0)),1)]))]),r("div",U,[r("h2",j,u(e.title),1),r("p",G,u(e.summary||"暂无摘要..."),1),r("div",H,[r("span",null,[a[2]||(a[2]=r("i",{class:"fa-regular fa-calendar-days"},null,-1)),m(" "+u(h(e.createTime)),1)]),e.categoryName?(o(),l("span",J,[a[3]||(a[3]=r("i",{class:"fa-regular fa-folder"},null,-1)),m(" "+u(e.categoryName),1)])):p("",!0),e.wordCount?(o(),l("span",K,[a[4]||(a[4]=r("i",{class:"fa-regular fa-file-word"},null,-1)),m(" 约 "+u(e.wordCount)+" 字",1)])):p("",!0)])])]),_:2},1032,["to"])]))),128))])):(o(),C(n,{key:1,description:"没有找到相关的文章，换个关键词试试吧~"})),t.value.total>0?(o(),l("div",M,[_(k,{background:"",layout:"prev, pager, next",total:t.value.total,"current-page":t.value.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>t.value.pageNum=e),"page-size":t.value.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>t.value.pageSize=e),onCurrentChange:f},null,8,["total","current-page","page-size"])])):p("",!0)])),[[w,d.value]])}}},ae=N(O,[["__scopeId","data-v-346a4a3c"]]);export{ae as default};

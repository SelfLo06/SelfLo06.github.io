import{_ as z,r as p,w as S,o as T,a as x,c as r,b as E,d as u,F as f,e as h,f as k,g as V,h as s,i as b,j as l,t as n,k as m,u as A,R as B}from"./index-nuh3O0ao.js";import{v as D}from"./el-loading-BNRefl0P.js";import{E as L}from"./el-select-D95BS9iq.js";import"./el-input-oi61NwlQ.js";import{E as P}from"./el-empty-DPT8EIrz.js";import"./index-MIEJoHR_.js";const q={key:0,class:"article-grid"},F={class:"card-cover"},H=["src","alt"],R={key:1,class:"cover-placeholder"},U={class:"card-body"},j={class:"card-title"},M={class:"card-summary"},G={class:"card-meta"},J={key:0},K={key:1},O={key:0,class:"meta-tags-list"},Q={key:2,class:"pagination-container"},W={__name:"HomeView",props:{categoryId:{type:String,required:!1},tagId:{type:String,required:!1}},setup(I){const d=I,i=p([]),t=p({pageNum:1,pageSize:10,total:0}),c=p(!0),g=async()=>{c.value=!0;try{const o={pageNum:t.value.pageNum,pageSize:t.value.pageSize};d.categoryId&&(o.categoryId=d.categoryId),d.tagId&&(o.tagId=d.tagId);const a=await V(o);a.code===0&&a.data&&Array.isArray(a.data.records)?(i.value=a.data.records,t.value.total=a.data.total||0):(i.value=[],t.value.total=0)}catch(o){console.error("请求文章列表时发生错误:",o),i.value=[],t.value.total=0}finally{c.value=!1}},w=o=>{t.value.pageNum=o,g(),window.scrollTo(0,0)},N=o=>o?o.split("T")[0]:"";return S([()=>d.categoryId,()=>d.tagId],([o,a],[v,y])=>{t.value.pageNum=1,g(),window.scrollTo(0,0)}),T(()=>{g()}),(o,a)=>{const v=P,y=L,C=D;return x((s(),r("div",null,[i.value.length>0?(s(),r("div",q,[(s(!0),r(f,null,h(i.value,e=>(s(),r("div",{key:e.id,class:"article-card"},[k(A(B),{to:{name:"articleDetail",params:{id:e.id}},class:"card-link"},{default:b(()=>[l("div",F,[e.coverImage?(s(),r("img",{key:0,src:e.coverImage,alt:e.title,loading:"lazy"},null,8,H)):(s(),r("div",R,[l("span",null,n(e.title.charAt(0)),1)]))]),l("div",U,[l("h2",j,n(e.title),1),l("p",M,n(e.summary||"暂无摘要..."),1),l("div",G,[l("span",null,[a[2]||(a[2]=l("i",{class:"fa-regular fa-calendar-days"},null,-1)),m(" "+n(N(e.createTime)),1)]),e.categoryName?(s(),r("span",J,[a[3]||(a[3]=l("i",{class:"fa-regular fa-folder"},null,-1)),m(" "+n(e.categoryName),1)])):u("",!0),e.wordCount?(s(),r("span",K,[a[4]||(a[4]=l("i",{class:"fa-regular fa-file-word"},null,-1)),m(" 约 "+n(e.wordCount)+" 字",1)])):u("",!0)]),e.tags&&e.tags.length?(s(),r("div",O,[(s(!0),r(f,null,h(e.tags,_=>(s(),r("span",{key:_.id,class:"card-tag"}," # "+n(_.name),1))),128))])):u("",!0)])]),_:2},1032,["to"])]))),128))])):c.value?u("",!0):(s(),E(v,{key:1,description:"博主很懒，还没有发布任何文章~"})),t.value.total>0?(s(),r("div",Q,[k(y,{background:"",layout:"prev, pager, next",total:t.value.total,"current-page":t.value.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>t.value.pageNum=e),"page-size":t.value.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>t.value.pageSize=e),onCurrentChange:w},null,8,["total","current-page","page-size"])])):u("",!0)])),[[C,c.value]])}}},te=z(W,[["__scopeId","data-v-07945b32"]]);export{te as default};

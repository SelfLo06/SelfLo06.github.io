import{m as E,p as $,q as L,s as G,c,i as n,k as e,e as l,v as j,x as w,y as q,b as f,z as C,A as z,n as y,t as g,g as M,B as F,_ as P,u as J,r as T,o as R,w as k,C as b,l as _,F as O,d as K,D as Q,E as U,j as W,G as S}from"./index-Dk8Xmi7U.js";import{E as Z}from"./el-skeleton-item-DtXmTsLz.js";import{M as X,i as Y,m as ee,P as te,H as V}from"./index-CzyUVmB_.js";import{u as ae}from"./index-DDbut1bp.js";import"./_commonjsHelpers-CqkleIqs.js";const se=$({name:"ImgEmpty"}),le=$({...se,setup(v){const r=L("empty"),i=G();return(a,m)=>(n(),c("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[e("defs",null,[e("linearGradient",{id:`linearGradient-1-${l(i)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[e("stop",{"stop-color":`var(${l(r).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),e("stop",{"stop-color":`var(${l(r).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),e("linearGradient",{id:`linearGradient-2-${l(i)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[e("stop",{"stop-color":`var(${l(r).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),e("stop",{"stop-color":`var(${l(r).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),e("rect",{id:`path-3-${l(i)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),e("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[e("g",{transform:"translate(-1268.000000, -535.000000)"},[e("g",{transform:"translate(1268.000000, 535.000000)"},[e("path",{d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${l(r).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),e("polygon",{fill:`var(${l(r).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),e("g",{transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[e("polygon",{fill:`var(${l(r).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),e("polygon",{fill:`var(${l(r).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),e("rect",{fill:`url(#linearGradient-1-${l(i)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),e("polygon",{fill:`var(${l(r).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),e("rect",{fill:`url(#linearGradient-2-${l(i)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),e("g",{transform:"translate(53.000000, 45.000000)"},[e("use",{fill:`var(${l(r).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${l(i)}`},null,8,["fill","xlink:href"]),e("polygon",{fill:`var(${l(r).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${l(i)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),e("polygon",{fill:`var(${l(r).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var oe=E(le,[["__file","img-empty.vue"]]);const re=j({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),ne=$({name:"ElEmpty"}),ie=$({...ne,props:re,setup(v){const r=v,{t:i}=ae(),a=L("empty"),m=w(()=>r.description||i("el.table.emptyText")),h=w(()=>({width:q(r.imageSize)}));return(u,x)=>(n(),c("div",{class:y(l(a).b())},[e("div",{class:y(l(a).e("image")),style:z(l(h))},[u.image?(n(),c("img",{key:0,src:u.image,ondragstart:"return false"},null,8,["src"])):C(u.$slots,"image",{key:1},()=>[M(oe)])],6),e("div",{class:y(l(a).e("description"))},[u.$slots.description?C(u.$slots,"description",{key:0}):(n(),c("p",{key:1},g(l(m)),1))],2),u.$slots.default?(n(),c("div",{key:0,class:y(l(a).e("bottom"))},[C(u.$slots,"default")],2)):f("v-if",!0)],2))}});var ce=E(ie,[["__file","empty.vue"]]);const ue=F(ce),de={class:"article-detail-wrapper"},me={key:0,class:"loading-container"},pe={key:1},fe={key:0,class:"article-detail-card"},ge={class:"article-body"},ye={key:0,class:"title-without-cover"},ve={class:"meta-tags"},he={class:"meta-tag tag-date"},ke={class:"meta-tag tag-words"},_e={key:0,class:"meta-tag tag-category"},we=["innerHTML"],$e={key:2,class:"comment-section"},xe={__name:"ArticleDetailView",props:{id:{type:String,required:!0}},setup(v){const r=v,i=J(),a=T(null),m=T(!0),h=w(()=>!m.value&&a.value&&a.value.id),u=new X({html:!0,linkify:!0,breaks:!0,highlight:function(o,t){if(t&&V.getLanguage(t))try{return'<pre class="hljs"><code>'+V.highlight(o,{language:t,ignoreIllegals:!0}).value+"</code></pre>"}catch(s){console.warn("代码高亮失败:",s)}return'<pre class="hljs"><code>'+u.utils.escapeHtml(o)+"</code></pre>"}});u.use(Y),u.use(ee);const x=w(()=>a.value&&a.value.contentMd?u.render(a.value.contentMd):""),A=()=>{S(()=>{document.querySelectorAll(".markdown-content pre.hljs").forEach(t=>{if(t.querySelector(".copy-code-btn"))return;const s=document.createElement("button");s.className="copy-code-btn",s.innerHTML='<i class="fa-regular fa-copy"></i> 复制',s.addEventListener("click",()=>{const B=t.querySelector("code").innerText,d=document.createElement("textarea");d.value=B,d.style.position="fixed",d.style.left="-9999px",document.body.appendChild(d),d.select();let p=!1;try{p=document.execCommand("copy")}catch(D){console.error("Fallback copy failed:",D)}document.body.removeChild(d),p?(s.innerHTML='<i class="fa-solid fa-check"></i> 已复制',setTimeout(()=>{s.innerHTML='<i class="fa-regular fa-copy"></i> 复制'},2e3)):(s.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> 复制失败',setTimeout(()=>{s.innerHTML='<i class="fa-regular fa-copy"></i> 复制'},2e3))}),t.style.position="relative",t.appendChild(s)})})},I=()=>{const o=document.getElementById("giscus-container");if(!o)return;o.innerHTML="";const t=i.theme==="light"?"light":"dark",s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-theme",t),s.setAttribute("data-repo","SelfLo06/blog-comments"),s.setAttribute("data-repo-id","R_kgDOPJ9FjQ"),s.setAttribute("data-category","Blog Comments"),s.setAttribute("data-category-id","DIC_kwDOPJ9Fjc4Csv-9"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-lang","zh-CN"),s.setAttribute("crossorigin","anonymous"),s.async=!0,o.appendChild(s)},N=async o=>{m.value=!0,a.value=null;try{const t=await Q(o);t.code===0&&t.data?t.data.status===0?(a.value=t.data,document.title=`${a.value.title} - selflo's Blog`):console.warn("尝试访问一篇草稿文章，已阻止渲染。"):console.error("获取文章详情失败:",t.message)}catch(t){console.error("请求文章详情时发生网络错误:",t)}finally{m.value=!1}},H=o=>o?o.split("T")[0]:"";return R(()=>{N(r.id)}),k(()=>r.id,o=>{o&&N(o)}),k(x,o=>{o&&A()}),k(h,o=>{o&&S(()=>{I()})}),k(()=>i.theme,o=>{const t=document.querySelector("iframe.giscus-frame");if(!t)return;const s=o==="light"?"light":"dark";t.contentWindow.postMessage({giscus:{setConfig:{theme:s}}},"https://giscus.app")}),(o,t)=>{const s=Z,B=U("RouterLink"),d=ue;return n(),c("div",de,[m.value?(n(),c("div",me,[M(s,{rows:10,animated:""})])):(n(),c("div",pe,[a.value&&a.value.id?(n(),c("div",fe,[a.value.coverImage?(n(),b(te,{key:0,title:a.value.title,"cover-image":a.value.coverImage},null,8,["title","cover-image"])):f("",!0),e("div",ge,[a.value.coverImage?f("",!0):(n(),c("h1",ye,g(a.value.title),1)),e("div",ve,[e("span",he,[t[0]||(t[0]=e("i",{class:"fa-regular fa-calendar-days"},null,-1)),_(" "+g(H(a.value.createTime)),1)]),e("span",ke,[t[1]||(t[1]=e("i",{class:"fa-solid fa-pencil"},null,-1)),_(" 约 "+g(a.value.wordCount)+" 字 ",1)]),a.value.categoryName?(n(),c("span",_e,[t[2]||(t[2]=e("i",{class:"fa-regular fa-folder"},null,-1)),_(" "+g(a.value.categoryName),1)])):f("",!0),a.value.tags&&a.value.tags.length>0?(n(!0),c(O,{key:1},K(a.value.tags,p=>(n(),b(B,{key:p.id,to:{name:"tag-search",query:{tagIds:p.id}},class:"meta-tag tag-item"},{default:W(()=>[t[3]||(t[3]=e("i",{class:"fa-solid fa-tag"},null,-1)),_(" "+g(p.name),1)]),_:2,__:[3]},1032,["to"]))),128)):f("",!0)]),e("div",{class:y(["markdown-content",{"dark-theme":l(i).theme==="dark"}]),innerHTML:x.value},null,10,we)])])):(n(),b(d,{key:1,description:"文章不存在或已被删除"}))])),h.value?(n(),c("div",$e,t[4]||(t[4]=[e("div",{class:"divider"},null,-1),e("div",{id:"giscus-container",class:"giscus-wrapper"},null,-1)]))):f("",!0)])}}},Se=P(xe,[["__scopeId","data-v-a756bf26"]]);export{Se as default};

import{_ as z,u as T,r as v,w as x,o as V,a as A,c as t,b as c,F as _,d as h,n as b,e as k,f as D,g as I,h as L,i as s,j as B,k as d,t as l,l as p,R as E}from"./index-BZHSFVTZ.js";import{v as q}from"./el-loading-Bu9ABmQ1.js";import{E as F}from"./el-select-BpUJtraX.js";import"./el-input-DcdFPbl3.js";import"./index-egL024J-.js";const H={key:0,class:"article-grid"},P={class:"card-cover"},R=["src","alt"],j={key:1,class:"cover-placeholder"},M={class:"card-body"},G={class:"card-title"},J={class:"card-summary"},K={class:"card-meta"},O={key:0},Q={key:1},U={key:0,class:"meta-tags-list"},W={key:2,class:"pagination-container"},X={__name:"HomeView",props:{categoryId:{type:String,required:!1},tagId:{type:String,required:!1}},setup(w){const N=T(),n=w,i=v([]),r=v({pageNum:1,pageSize:10,total:0}),u=v(!0),g=async()=>{u.value=!0;try{const o={pageNum:r.value.pageNum,pageSize:r.value.pageSize};n.categoryId&&(o.categoryId=n.categoryId),n.tagId&&(o.tagId=n.tagId);const e=await L(o);e.code===0&&e.data&&Array.isArray(e.data.records)?(i.value=e.data.records,r.value.total=e.data.total||0):(i.value=[],r.value.total=0)}catch(o){console.error("请求文章列表时发生错误:",o),i.value=[],r.value.total=0}finally{u.value=!1}},C=o=>{r.value.pageNum=o,g(),window.scrollTo(0,0)},S=o=>o?o.split("T")[0]:"";return x([()=>n.categoryId,()=>n.tagId],([o,e],[m,f])=>{r.value.pageNum=1,g(),window.scrollTo(0,0)}),V(()=>{g()}),(o,e)=>{const m=F,f=q;return A((s(),t("div",null,[i.value.length>0?(s(),t("div",H,[(s(!0),t(_,null,h(i.value,a=>(s(),t("div",{key:a.id,class:"article-card"},[I(k(E),{to:{name:"articleDetail",params:{id:a.id}},class:"card-link"},{default:B(()=>[d("div",P,[a.coverImage?(s(),t("img",{key:0,src:a.coverImage,alt:a.title,loading:"lazy"},null,8,R)):(s(),t("div",j,[d("span",null,l(a.title.charAt(0)),1)]))]),d("div",M,[d("h2",G,l(a.title),1),d("p",J,l(a.summary||"暂无摘要..."),1),d("div",K,[d("span",null,[e[0]||(e[0]=d("i",{class:"fa-regular fa-calendar-days"},null,-1)),p(" "+l(S(a.createTime)),1)]),a.categoryName?(s(),t("span",O,[e[1]||(e[1]=d("i",{class:"fa-regular fa-folder"},null,-1)),p(" "+l(a.categoryName),1)])):c("",!0),a.wordCount?(s(),t("span",Q,[e[2]||(e[2]=d("i",{class:"fa-regular fa-file-word"},null,-1)),p(" 约 "+l(a.wordCount)+" 字",1)])):c("",!0)]),a.tags&&a.tags.length?(s(),t("div",U,[(s(!0),t(_,null,h(a.tags,y=>(s(),t("span",{key:y.id,class:"card-tag"}," # "+l(y.name),1))),128))])):c("",!0)])]),_:2},1032,["to"])]))),128))])):u.value?c("",!0):(s(),t("div",{key:1,class:b(["empty-container",{"dark-theme":k(N).theme==="dark"}])},e[3]||(e[3]=[D('<div class="empty-state" data-v-f4f9662d><div class="magnifier" data-v-f4f9662d><div class="magnifier-glass" data-v-f4f9662d></div><div class="magnifier-handle" data-v-f4f9662d></div></div><div class="empty-text" data-v-f4f9662d><p data-v-f4f9662d>博主很懒，还没有发布任何文章~</p></div></div>',1)]),2)),r.value.total>0?(s(),t("div",W,[I(m,{background:"",layout:"prev, pager, next",total:r.value.total,"current-page":r.value.pageNum,"page-size":r.value.pageSize,onCurrentChange:C},null,8,["total","current-page","page-size"])])):c("",!0)])),[[f,u.value]])}}},ta=z(X,[["__scopeId","data-v-f4f9662d"]]);export{ta as default};

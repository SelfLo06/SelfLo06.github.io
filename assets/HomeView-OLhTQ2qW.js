import{_ as S,u as z,r as v,w as T,o as x,a as V,c as s,b as u,F as _,d as h,n as A,e as k,f as D,g as I,h as L,i as o,j as B,k as l,t as n,l as p,R as E}from"./index-Dit6LHjw.js";import{v as P}from"./el-loading-7Sh_TpH4.js";import{E as q}from"./el-select-CrnmDtpE.js";import"./el-input-BqgytmYh.js";import"./index-CmZlTNAU.js";const F={key:0,class:"article-grid"},H={class:"card-cover"},R=["src","alt"],U={key:1,class:"cover-placeholder"},j={class:"card-body"},M={class:"card-title"},G={class:"card-summary"},J={class:"card-meta"},K={key:0},O={key:1},Q={key:0,class:"meta-tags-list"},W={key:2,class:"pagination-container"},X={__name:"HomeView",props:{categoryId:{type:String,required:!1},tagId:{type:String,required:!1}},setup(w){const N=z(),d=w,i=v([]),t=v({pageNum:1,pageSize:10,total:0}),c=v(!0),g=async()=>{c.value=!0;try{const r={pageNum:t.value.pageNum,pageSize:t.value.pageSize};d.categoryId&&(r.categoryId=d.categoryId),d.tagId&&(r.tagId=d.tagId);const a=await L(r);a.code===0&&a.data&&Array.isArray(a.data.records)?(i.value=a.data.records,t.value.total=a.data.total||0):(i.value=[],t.value.total=0)}catch(r){console.error("请求文章列表时发生错误:",r),i.value=[],t.value.total=0}finally{c.value=!1}},b=r=>{t.value.pageNum=r,g(),window.scrollTo(0,0)},C=r=>r?r.split("T")[0]:"";return T([()=>d.categoryId,()=>d.tagId],([r,a],[m,y])=>{t.value.pageNum=1,g(),window.scrollTo(0,0)}),x(()=>{g()}),(r,a)=>{const m=q,y=P;return V((o(),s("div",null,[i.value.length>0?(o(),s("div",F,[(o(!0),s(_,null,h(i.value,e=>(o(),s("div",{key:e.id,class:"article-card"},[I(k(E),{to:{name:"articleDetail",params:{id:e.id}},class:"card-link"},{default:B(()=>[l("div",H,[e.coverImage?(o(),s("img",{key:0,src:e.coverImage,alt:e.title,loading:"lazy"},null,8,R)):(o(),s("div",U,[l("span",null,n(e.title.charAt(0)),1)]))]),l("div",j,[l("h2",M,n(e.title),1),l("p",G,n(e.summary||"暂无摘要..."),1),l("div",J,[l("span",null,[a[2]||(a[2]=l("i",{class:"fa-regular fa-calendar-days"},null,-1)),p(" "+n(C(e.createTime)),1)]),e.categoryName?(o(),s("span",K,[a[3]||(a[3]=l("i",{class:"fa-regular fa-folder"},null,-1)),p(" "+n(e.categoryName),1)])):u("",!0),e.wordCount?(o(),s("span",O,[a[4]||(a[4]=l("i",{class:"fa-regular fa-file-word"},null,-1)),p(" 约 "+n(e.wordCount)+" 字",1)])):u("",!0)]),e.tags&&e.tags.length?(o(),s("div",Q,[(o(!0),s(_,null,h(e.tags,f=>(o(),s("span",{key:f.id,class:"card-tag"}," # "+n(f.name),1))),128))])):u("",!0)])]),_:2},1032,["to"])]))),128))])):c.value?u("",!0):(o(),s("div",{key:1,class:A(["empty-container",{"dark-theme":k(N).theme==="dark"}])},a[5]||(a[5]=[D('<div class="empty-state" data-v-e3be004e><div class="magnifier" data-v-e3be004e><div class="magnifier-glass" data-v-e3be004e></div><div class="magnifier-handle" data-v-e3be004e></div></div><div class="empty-text" data-v-e3be004e><p data-v-e3be004e>博主很懒，还没有发布任何文章~</p></div></div>',1)]),2)),t.value.total>0?(o(),s("div",W,[I(m,{background:"",layout:"prev, pager, next",total:t.value.total,"current-page":t.value.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>t.value.pageNum=e),"page-size":t.value.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>t.value.pageSize=e),onCurrentChange:b},null,8,["total","current-page","page-size"])])):u("",!0)])),[[y,c.value]])}}},te=S(X,[["__scopeId","data-v-e3be004e"]]);export{te as default};

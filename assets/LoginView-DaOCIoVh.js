import{_ as g,r as u,c as p,j as s,d as y,a as i,V as d,t as w,W as V,z as b,h as v,X as _}from"./index-BL5HPMg1.js";const x={class:"login-container"},k={class:"form-group"},K={class:"form-group"},S={class:"form-group"},B={key:0,class:"error-message"},L={__name:"LoginView",setup(M){const r=u(""),l=u(""),n=u(""),t=u(""),m=b(),c=void 0,f=async()=>{if(t.value="",!r.value||!l.value||!n.value){t.value="用户名、密码和站点密码都不能为空";return}if(n.value!==c){t.value="站点密码错误！";return}try{const o=await _.post("/user/login",{username:r.value,password:l.value});if(o.code===0&&o.data){const e=o.data;localStorage.setItem("Authorization",e),alert("登录成功！"),m.push({name:"admin-articles"})}else t.value=o.message||"用户名或密码不正确"}catch(o){t.value=o.message||"服务连接失败，请稍后再试。",console.error("登录失败:",o)}};return(o,e)=>(v(),p("div",x,[e[7]||(e[7]=s("h1",null,"博客后台登录",-1)),s("form",{onSubmit:V(f,["prevent"])},[s("div",k,[e[3]||(e[3]=s("label",{for:"username"},"用户名",-1)),i(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),placeholder:"请输入用户名"},null,512),[[d,r.value]])]),s("div",K,[e[4]||(e[4]=s("label",{for:"password"},"密码",-1)),i(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),placeholder:"请输入密码"},null,512),[[d,l.value]])]),s("div",S,[e[5]||(e[5]=s("label",{for:"secretKey"},"站点密码",-1)),i(s("input",{type:"password",id:"secretKey","onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a),placeholder:"请输入站点密码"},null,512),[[d,n.value]])]),t.value?(v(),p("p",B,w(t.value),1)):y("",!0),e[6]||(e[6]=s("button",{type:"submit"},"登 录",-1))],32)]))}},z=g(L,[["__scopeId","data-v-b500f376"]]);export{z as default};

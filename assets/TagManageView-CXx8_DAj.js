import{_ as I,r as i,o as N,c as F,j as c,a as L,f as a,i as l,b as $,h as b,k as u}from"./index-Br0CzkVH.js";import{v as z}from"./el-loading-BKPY-29k.js";import{E as R,a as U,b as j}from"./el-form-item-C3oefA0Z.js";import{E as q}from"./el-input-D6WrZ-0S.js";import{a as h,b as G,c as H,d as J,E as v}from"./el-button-CrGH9R-N.js";import{b as K,c as O,u as P,e as Q}from"./admin-CA04ZA2_.js";import"./index-BUC56HtH.js";const S={class:"tag-manage-view"},W={class:"actions"},X={class:"dialog-footer"},Y={__name:"TagManageView",setup(Z){const g=i([]),_=i(!0),n=i(!1),r=i(!1),p=i(null),t=i({id:null,name:""}),w={name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]},f=async()=>{_.value=!0;try{const s=await K();g.value=s.data}finally{_.value=!1}};N(f);const y=()=>{r.value=!1,t.value={id:null,name:""},n.value=!0,p.value?.resetFields()},E=s=>{r.value=!0,t.value={...s},n.value=!0},k=async s=>{await J.confirm("确认删除该标签吗？","提示",{type:"warning"}),await O(s),v.success("删除成功"),f()},V=async()=>{await p.value.validate(),r.value?(await P(t.value.id,{name:t.value.name}),v.success("更新成功")):(await Q({name:t.value.name}),v.success("新增成功")),n.value=!1,f()};return(s,e)=>{const d=h,m=H,C=G,T=q,x=j,A=U,B=R,M=z;return b(),F("div",S,[e[8]||(e[8]=c("h1",null,"标签管理",-1)),c("div",W,[a(d,{type:"primary",onClick:y},{default:l(()=>e[3]||(e[3]=[u("新增标签")])),_:1,__:[3]})]),L((b(),$(C,{data:g.value,style:{width:"100%"}},{default:l(()=>[a(m,{prop:"id",label:"ID",width:"180"}),a(m,{prop:"name",label:"标签名称"}),a(m,{prop:"articleCount",label:"关联文章数"}),a(m,{label:"操作",width:"200"},{default:l(({row:o})=>[a(d,{link:"",type:"primary",size:"small",onClick:D=>E(o)},{default:l(()=>e[4]||(e[4]=[u("编辑")])),_:2,__:[4]},1032,["onClick"]),a(d,{link:"",type:"danger",size:"small",onClick:D=>k(o.id)},{default:l(()=>e[5]||(e[5]=[u("删除")])),_:2,__:[5]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[M,_.value]]),a(B,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value=o),title:r.value?"编辑标签":"新增标签",width:"30%"},{footer:l(()=>[c("span",X,[a(d,{onClick:e[1]||(e[1]=o=>n.value=!1)},{default:l(()=>e[6]||(e[6]=[u("取消")])),_:1,__:[6]}),a(d,{type:"primary",onClick:V},{default:l(()=>e[7]||(e[7]=[u("确认")])),_:1,__:[7]})])]),default:l(()=>[a(A,{ref_key:"formRef",ref:p,model:t.value,rules:w,"label-width":"80px"},{default:l(()=>[a(x,{label:"标签名称",prop:"name"},{default:l(()=>[a(T,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ie=I(Y,[["__scopeId","data-v-92485135"]]);export{ie as default};

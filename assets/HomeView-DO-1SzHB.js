import{_ as z,u as x,r as m,w as N,o as V,a as T,c as s,b as c,F as f,d as h,n as A,e as L,f as D,g as k,h as B,i as E,j as o,k as P,l as n,t as l,m as y}from"./index-DfBwzagP.js";import{v as q}from"./el-loading-Qn29by3D.js";import{E as F}from"./el-select-CTpuUI_M.js";import"./el-input-DIT_5FQg.js";import"./index-CPhsA10n.js";const H={key:0,class:"article-grid"},R={class:"card-cover"},j=["src","alt"],M={key:1,class:"cover-placeholder"},U={class:"card-body"},G={class:"card-title"},J={class:"card-summary"},K={class:"card-meta"},O={key:0},Q={key:1},W={key:0,class:"meta-tags-list"},X={key:2,class:"pagination-container"},Y={__name:"HomeView",props:{categoryId:{type:String,required:!1},tagId:{type:String,required:!1}},setup(w){const I=x(),d=w,i=m([]),r=m({page:1,pageSize:10,total:0}),u=m(!0),g=async()=>{u.value=!0;try{const t={page:r.value.page,pageSize:r.value.pageSize};d.categoryId&&(t.categoryId=d.categoryId),d.tagId&&(t.tagId=d.tagId);const a=await B(t);a.code===0&&a.data&&Array.isArray(a.data.records)?(i.value=a.data.records,r.value.total=a.data.total||0):(i.value=[],r.value.total=0)}catch(t){console.error("请求文章列表时发生错误:",t),i.value=[],r.value.total=0}finally{u.value=!1}},b=t=>{r.value.page=t,g(),window.scrollTo(0,0)},C=t=>t?t.split("T")[0]:"";return N(()=>[d.categoryId,d.tagId],([t,a],[v,p])=>{(t!==v||a!==p)&&(r.value.page=1,g(),window.scrollTo(0,0))}),V(()=>{g()}),(t,a)=>{const v=E("RouterLink"),p=F,S=q;return T((o(),s("div",null,[i.value.length>0?(o(),s("div",H,[(o(!0),s(f,null,h(i.value,e=>(o(),s("div",{key:e.id,class:"article-card"},[k(v,{to:{name:"articleDetail",params:{id:e.id}},class:"card-link"},{default:P(()=>[n("div",R,[e.coverImage?(o(),s("img",{key:0,src:e.coverImage,alt:e.title,loading:"lazy"},null,8,j)):(o(),s("div",M,[n("span",null,l(e.title.charAt(0)),1)]))]),n("div",U,[n("h2",G,l(e.title),1),n("p",J,l(e.summary||"暂无摘要..."),1),n("div",K,[n("span",null,[a[1]||(a[1]=n("i",{class:"fa-regular fa-calendar-days"},null,-1)),y(" "+l(C(e.createTime)),1)]),e.categoryName?(o(),s("span",O,[a[2]||(a[2]=n("i",{class:"fa-regular fa-folder"},null,-1)),y(" "+l(e.categoryName),1)])):c("",!0),e.wordCount?(o(),s("span",Q,[a[3]||(a[3]=n("i",{class:"fa-regular fa-file-word"},null,-1)),y(" 约 "+l(e.wordCount)+" 字",1)])):c("",!0)]),e.tags&&e.tags.length?(o(),s("div",W,[(o(!0),s(f,null,h(e.tags,_=>(o(),s("span",{key:_.id,class:"card-tag"}," # "+l(_.name),1))),128))])):c("",!0)])]),_:2},1032,["to"])]))),128))])):u.value?c("",!0):(o(),s("div",{key:1,class:A(["empty-container",{"dark-theme":L(I).theme==="dark"}])},a[4]||(a[4]=[D('<div class="empty-state" data-v-1193b490><div class="magnifier" data-v-1193b490><div class="magnifier-glass" data-v-1193b490></div><div class="magnifier-handle" data-v-1193b490></div></div><div class="empty-text" data-v-1193b490><p data-v-1193b490>博主很懒，还没有发布任何文章~</p></div></div>',1)]),2)),r.value.total>0?(o(),s("div",X,[k(p,{background:"",layout:"prev, pager, next",total:r.value.total,"current-page":r.value.page,"onUpdate:currentPage":a[0]||(a[0]=e=>r.value.page=e),"page-size":r.value.pageSize,onCurrentChange:b},null,8,["total","current-page","page-size"])])):c("",!0)])),[[S,u.value]])}}},sa=z(Y,[["__scopeId","data-v-1193b490"]]);export{sa as default};
